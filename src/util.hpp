#ifndef UTIL__H
#define UTIL__H

#include <string>
#include "File.hpp"

/////////////////////////////////////////////////////////////////////////////
/// \brief Check if parameter can separate words.
///
/// \param c
///
/// \return true if `c` can separate words, like ' '.
///
////////////////////////////////////////////////////////////////////////////
bool isSeparator(char c);

/////////////////////////////////////////////////////////////////////////////
/// \brief Check if `c` end a line.
///
/// \param c Char to check.
///
/// \return True if 'c' end a line, like '\n'.
///
////////////////////////////////////////////////////////////////////////////
bool isNewline(char c);

/////////////////////////////////////////////////////////////////////////////
/// \brief Given a path to a file, return the filename.
///
/// \param s Path to file.
///
/// \return Filename.
///
////////////////////////////////////////////////////////////////////////////
std::string getFilenameFromPath(std::string s);

/////////////////////////////////////////////////////////////////////////////
/// \brief Get number of words is the next sentence of the file.
///
/// \param file File to peek from.
///
/// \return  Number of words.
///
////////////////////////////////////////////////////////////////////////////
unsigned int getNextSentenceSize(File & file);

/////////////////////////////////////////////////////////////////////////////
/// \brief Number of characters that would be printed, used for alignment.
///
/// \param s 
///
/// \return 
///
////////////////////////////////////////////////////////////////////////////
unsigned int lengthPrinted(const std::string & s);

/////////////////////////////////////////////////////////////////////////////
/// \brief Check if string is a number.
///
/// \param s String to check.
///
/// \return True if s is a number.
///
////////////////////////////////////////////////////////////////////////////
bool isNum(const std::string & s);

/////////////////////////////////////////////////////////////////////////////
/// \brief Check if a `char` can end a sentence, like '.'.
///
/// \param c `char` to check.
///
/// \return True if `c` can end a sentence.
///
////////////////////////////////////////////////////////////////////////////
bool endSentence(char c);

/////////////////////////////////////////////////////////////////////////////
/// \brief Copy cleaned version of a file into another.
///
/// Cleaning is
/// - removing comments , message sender and time
/// - One line per sentence.
///
/// \param source Corpus to clean.
/// \param dest File the result will be written into.
///
////////////////////////////////////////////////////////////////////////////
void cleanCorpus(File & source, File & dest);

/////////////////////////////////////////////////////////////////////////////
/// \brief Read a File until the beginning of a word.
///
/// Ignore spaces, newline, punctuation...
///
/// \param corpus File to read from.
///
/// \return True if the next word to be read from `corpus` is the first of a sentence.
///
////////////////////////////////////////////////////////////////////////////
bool ignoreSeparators(File & corpus);

/////////////////////////////////////////////////////////////////////////////
/// \brief Similar of ignoreSeparators(), but print them.
///
/// \param corpus File to read from.
/// \param output File to print to.
///
/// \return True if the next word to be read from `corpus` is the first of a sentence.
///
////////////////////////////////////////////////////////////////////////////
bool ignoreAndPrintSeparators(File & corpus, File & output);

/////////////////////////////////////////////////////////////////////////////
/// \brief Read a word from a File.
///
/// \param corpus File to read from.
/// \param word String to store the read word into.
/// \param sentenceBegin True if the word to read is the first of a sentence.
///
/// \return Lexicon::unknown if the word was not recognized as a special pattern.
/// Lexicon::number if the word has been recognized as a number,...
///
////////////////////////////////////////////////////////////////////////////
unsigned int readWord(File & corpus, std::string & word, bool sentenceBegin);

/////////////////////////////////////////////////////////////////////////////
/// \brief Convert a certain letter of a string to lower case.
///
/// \param s String containing the letter (will be altered).
/// \param i Index of the letter.
///
////////////////////////////////////////////////////////////////////////////
void toLowerCase(std::string & s, unsigned int i);

/////////////////////////////////////////////////////////////////////////////
/// \brief Convert a certain letter of a string to upper case.
///
/// \param s String containing the letter (will be altered).
/// \param i Index of the letter.
///
/// \todo Make this works for letter with accents.
///
////////////////////////////////////////////////////////////////////////////
void toUpperCase(std::string & s, unsigned int i);

#endif
